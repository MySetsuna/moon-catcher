export { loadImportBuild };
export { setImportBuildGetters };
import { importServerEntry } from '@brillout/vite-plugin-server-entry/importServerEntry.js';
import { assert } from '../utils.js';
const buildGetters = (globalThis.__vike_buildGetters = globalThis.__vike_buildGetters || {
    getters: null
});
function setImportBuildGetters(getters) {
    buildGetters.getters = getters;
}
async function loadImportBuild(outDir) {
    if (!buildGetters.getters) {
        await importServerEntry(outDir);
        assert(buildGetters.getters);
    }
    const [pageFiles, clientManifest, pluginManifest] = await Promise.all([
        buildGetters.getters.pageFiles(),
        buildGetters.getters.clientManifest(),
        buildGetters.getters.pluginManifest()
    ]);
    const buildEntries = { pageFiles, clientManifest, pluginManifest };
    return buildEntries;
}
